{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-to-get-details-of-all-the-posts-a-person-upvoted-in-steemit","result":{"data":{"site":{"siteMetadata":{"title":"My Hive Posts"}},"hiveArticle":{"title":"How to get Details of All the Posts a Person Upvoted in Steemit","body":"#### Repository\n\nhttps://github.com/steemit/steem-js\n\n#### What Will I Learn?\n\n- You will learn How to get Votes Made by User\n- You will learn How to get Details about the Posts where Upvote is Made\n\n#### Requirements\n\n- Basic Understanding of Promises in JavaScript \n\n#### Difficulty\n\n- Basic\n\n#### Tutorial Contents\nThis will be a very short tutorial where we will learn about getting all the posts you voted on whether it's a self-post or others posts. For this, you need to know two basic functions of Steem.js and they are getAccountVotes() and getContent().\n\ngetAccountVotes() gives you details about all the posts you have upvoted, where voter is the username without @. It will give you an array of objects. The object has authorperm which is a permalink of the post you voted, weight of the upvoted, reshares, percentage and the time as shown below. As you can see the time goes back to 2017, which means it gives me the upvotes from the start.\n\n```\nsteem.api.getAccountVotes('codingdefined', function(err, result) {\n  console.log(err, result);\n});\n``` \n\n![](https://steemitimages.com/DQmTDvvnhAjQNDxwhexiQk9tDS8zTqxKB9xSfNdyUHJZLyw/image.png)\n\nSince I do not want to know the upvotes made by in 2017, so what I am gonna do is to reverse the array based on time so that I will get the latest upvote as shown below.\n\n```\nfunction compare(a,b) {\n  if (a.time < b.time)\n    return -1;\n  if (a.time > b.time)\n    return 1;\n  return 0;\n}\n\nsteem.api.getAccountVotes('codingdefined', function (err, resp) {\n\tif (err) console.log(err)\n\tresp.sort(compare);\n\tresp.reverse();\n        console.log(resp);\n}); \n```\n\nI have written a compare method, Sorted by Votes array and then reversed it. The sorting algorithm is for ascending order though I can change the logic, I just kept if anyone needs the array as an ascending order. Now I have the array which is sorted based on the most recent upvote. \n\nNext is to get the Content of the Post which I have upvoted, for that we will be using Promises as we have to call the Steemit Functions Asynchrously inside the loop of the array. Once done we will be combining all the promises and then create the list. Since there are quite a few data, so we will be taking only last 10 upvotes and then get the details.\n\nThe Code of the same is, where we are first taking the 10 objects from the array and then looping it through the map function. Inside the loop, we are splittling the authorperm on '/' to get the author and permalink and then calling getContent asynchronously. At last we are combining all the promises and then displaying the result.\n\n```\nfunction compare(a,b) {\n  if (a.time < b.time)\n    return -1;\n  if (a.time > b.time)\n    return 1;\n  return 0;\n}\n\nsteem.api.getAccountVotes('codingdefined', function (err, resp) {\n    if (err) console.log(err)\n    resp.sort(compare);\n    resp.reverse();\n    let promises = resp.slice(0, 10).map(r => {\n        const autper = r.authorperm.split('/', 2);\n        return steem.api.getContentAsync(autper[0], autper[1])\n                .then((result) => {\n                    return result\n                });\n    })\n    Promise.all(promises)\n      .then(results => {\n        console.log(results);\n      })\n      .catch(e => {\n        console.error(e);\n      })\n})\n```\n\nAs you can see below my last upvote was on https://steemit.com/utopian-io/@amosbastian/introducing-football-a-python-wrapper-for-the-football-data-api. \n\n![](https://steemitimages.com/DQmaTZhTRatZHSM5Gkm2EkHKFctyPvY9BG35EoNeYwNmtEZ/image.png)\n\nThus this simple code gives you the understanding about how to combine two functions and get the required results.\n\n#### Resources\n\nhttps://github.com/steemit/steem-js/tree/master/doc\n\n#### Proof of Work Done\n\nhttps://github.com/codingdefined","created":"May 14, 2018"}},"pageContext":{"title":"How to get Details of All the Posts a Person Upvoted in Steemit","permlink":"how-to-get-details-of-all-the-posts-a-person-upvoted-in-steemit","previous":{"title":"Getting Started with AspnetBoilerPlate","permlink":"getting-started-with-aspnetboilerplate"},"next":{"title":"When You Are Standing Above the Clouds","permlink":"when-you-are-standing-above-the-clouds"}}}}